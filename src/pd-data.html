<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/app-storage/app-localstorage/app-localstorage-document.html">
<dom-module id="pd-data">
  <template>
    <iron-ajax auto url="../data/foods.json" handle-as="json" on-response="handleResponse"></iron-ajax>
    <app-localstorage-document key="weeklyProducts" data="{{weeklyProducts}}"></app-localstorage-document>
  </template>
  <script>
    (function () {
      Polymer({
        is: 'pd-data',
        properties: {
          foodData: {
            type: Array,
            value: [],
            notify: true
          },
          weeklyProducts: {
            type: Array,
            value: [],
            notify: true
          }
        },
        handleResponse: function (e) {
          var data = e.detail.response;
          // inline edit, but not a problem in this case
          data.unshift('foodData');
          this.push.apply(this, data);
        }
      });
    })();
  </script>
</dom-module>